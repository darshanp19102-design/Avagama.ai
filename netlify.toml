[build]
  base = "frontend"
  publish = "."
  command = "npm run build"

# Proxy API requests to your eventual production backend
# Once your backend is hosted (e.g., Render, Heroku), replace the URL below
[[redirects]]
  from = "/api/*"
  to = "https://avagama-ai.onrender.com/api/:splat"
  status = 200

# Client-side routing fallback for SPA
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# Prevent aggressive caching of the HTML file so users always get the latest JS version
[[headers]]
  for = "/*.html"
  [headers.values]
    Cache-Control = "no-cache, no-store, must-revalidate"
    Pragma = "no-cache"
    Expires = "0"

# Prevent caching of API responses
[[headers]]
  for = "/api/*"
  [headers.values]
    Cache-Control = "no-store, max-age=0"
